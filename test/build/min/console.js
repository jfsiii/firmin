(function(a){var b=(typeof exports==='object'),d=(typeof JS==='undefined')?require('./core'):JS,e=d.Enumerable||require('./enumerable').Enumerable;if(b)exports.JS=exports;a(d,e,b?exports:d)})(function(i,n,o){'use strict';var c=new i.Module('Console',{extend:{nameOf:function(a,b){var d=[],e,f,g,h;if(i.isType(a,Array)){for(e=0,f=a.length;e<f;e++)d.push(this.nameOf(a[e]));return d}if(a.displayName)return a.displayName;g=[{name:null,o:b||i.ENV}];h=0;while(typeof g==='object'&&h<this.MAX_DEPTH){h+=1;g=this.descend(g,a)}if(typeof g=='string'){g=g.replace(/\.prototype\./g,'#');a.displayName=g;if(a.__meta__)a.__meta__.displayName=g+'.__meta__'}return a.displayName},descend:function(a,b){var d=[],e=a.length,f=e,g,h,j;while(f--){h=a[f];if(i.isType(h.o,Array))continue;j=h.name?h.name+'.':'';for(g in h.o){if(b&&h.o[g]===b)return j+g;d.push({name:j+g,o:h.o[g]})}}return d},convert:function(b,d){if(b===null||b===undefined)return String(b);var e=n,d=d||[],f;if(i.indexOf(d,b)>=0)return'#circular';if(b instanceof Error){return(typeof b.message==='string'&&!b.message)?b.name:b.name+(b.message?': '+b.message:'')}if(b instanceof Array){d.push(b);f=new e.Collection(b).map(function(a){return this.convert(a,d)},this).join(', ');d.pop();return f?'[ '+f+' ]':'[]'}if(b instanceof String||typeof b==='string')return'"'+b+'"';if(b instanceof Function)return b.displayName||b.name||(b.toString().match(/^\s*function ([^\(]+)\(/)||[])[1]||'#function';if(b instanceof Date)return b.toGMTString();if(b.toString&&b.toString!==Object.prototype.toString&&!b.toString.__traced__)return b.toString();if(b.nodeType!==undefined)return b.toString();d.push(b);f=new e.Collection(e.objectKeys(b,false).sort()).map(function(a){return this.convert(a,d)+': '+this.convert(b[a],d)},this).join(', ');d.pop();return f?'{ '+f+' }':'{}'},filterBacktrace:function(a){if(!a)return a;a=a.replace(/^\S.*\n/gm,'');var b=this.adapter.backtraceFilter();return b?a.replace(b,''):a},ANSI_CSI:'\u001B[',DEFAULT_WIDTH:78,DEFAULT_HEIGHT:24,MAX_DEPTH:4,NO_COLOR:'NO_COLOR',ESCAPE_CODES:{cursor:{cursorUp:'%1A',cursorDown:'%1B',cursorForward:'%1C',cursorBack:'%1D',cursorNextLine:'%1E',cursorPrevLine:'%1F',cursorColumn:'%1G',cursorPosition:'%1;%2H',cursorHide:'?25l',cursorShow:'?25h'},screen:{eraseScreenForward:'0J',eraseScreenBack:'1J',eraseScreen:'2J',eraseLineForward:'0K',eraseLineBack:'1K',eraseLine:'2K'},reset:{reset:'0m'},weight:{bold:'1m',normal:'22m'},style:{italic:'',noitalic:''},underline:{underline:'4m',noline:'24m'},blink:{blink:'5m',noblink:'25m'},color:{black:'30m',red:'31m',green:'32m',yellow:'33m',blue:'34m',magenta:'35m',cyan:'36m',white:'37m',nocolor:'39m'},background:{bgblack:'40m',bgred:'41m',bggreen:'42m',bgyellow:'43m',bgblue:'44m',bgmagenta:'45m',bgcyan:'46m',bgwhite:'47m',bgnocolor:'49m'}},coloring:function(){return this.adapter.coloring()},envvar:function(a){return this.adapter.envvar(a)},escape:function(a){return c.ANSI_CSI+a},exit:function(a){this.adapter.exit(a)},getDimensions:function(){return this.adapter.getDimensions()}},consoleFormat:function(){this.reset();var a=arguments.length;while(a--)this[arguments[a]]()},print:function(a){a=(a===undefined?'':a).toString();c.adapter.print(a)},puts:function(a){a=(a===undefined?'':a).toString();c.adapter.puts(a)}});c.extend({Base:new i.Class({__buffer__:'',__format__:'',backtraceFilter:function(){if(typeof version==='function'&&version()>100){return/.*/}else{return null}},coloring:function(){return!this.envvar(c.NO_COLOR)},echo:function(a){if(typeof console!=='undefined')return console.log(a);if(typeof print==='function')return print(a)},envvar:function(a){return null},exit:function(a){if(typeof system==='object'&&system.exit)system.exit(a);if(typeof quit==='function')quit(a)},format:function(a,b,d){if(!this.coloring())return;var e=c.ESCAPE_CODES[a][b];for(var f=0,g=d.length;f<g;f++)e=e.replace('%'+(f+1),d[f]);this.__format__+=c.escape(e)},flushFormat:function(){var a=this.__format__;this.__format__='';return a},getDimensions:function(){var a=this.envvar('COLUMNS')||c.DEFAULT_WIDTH,b=this.envvar('ROWS')||c.DEFAULT_HEIGHT;return[parseInt(a,10),parseInt(b,10)]},print:function(a){var b=this.coloring(),d=this.getDimensions()[0],e=c.escape,f,g,h;while(a.length>0){f=this.__buffer__.length;g=(f>0&&b)?e('1F')+e((f+1)+'G'):'';h=a.substr(0,d-f);this.__buffer__+=h;if(b)this.echo(g+this.flushFormat()+h);if(this.__buffer__.length===d){if(!b)this.echo(this.__buffer__);this.__buffer__=''}a=a.substr(d-f)}},puts:function(a){var b=this.coloring(),d=c.escape,e=this.__buffer__.length,f=(e>0&&b)?d('1F')+d((e+1)+'G'):this.__buffer__;this.echo(f+this.flushFormat()+a);this.__buffer__=''}})});c.extend({Browser:new i.Class(c.Base,{backtraceFilter:function(){return new RegExp(window.location.href.replace(/(\/[^\/]+)/g,'($1)?')+'/?','g')},coloring:function(){if(this.envvar(c.NO_COLOR))return false;return c.AIR},echo:function(a){if(window.runtime)return window.runtime.trace(a);if(window.console)return console.log(a);alert(a)},envvar:function(a){return window[a]||null},getDimensions:function(){if(c.AIR)return this.callSuper();return[1024,1]}})});c.extend({BrowserColor:new i.Class(c.Browser,{COLORS:{green:'limegreen'},__queue__:[],__state__:{},format:function(a,b){b=b.replace(/^bg/,'');var d=i.extend({},this.__state__),e=this.COLORS[b]||b,f=/^no/.test(b);if(a==='reset')d={};else if(f)delete d[a];else if(a==='weight')d.weight='font-weight: '+b;else if(a==='style')d.style='font-style: '+b;else if(a==='underline')d.underline='text-decoration: underline';else if(a==='color')d.color='color: '+e;else if(a==='background')d.background='background-color: '+e;else d=null;if(d){this.__state__=d;this.__queue__.push(d)}},print:function(a){this.__queue__.push(a)},puts:function(a){this.print(a);var b='',d=[],e;while(e=this.__queue__.shift()){if(typeof e==='string'){b+='%c'+e;d.push(this._0(this.__state__))}else{this.__state__=e}}console.log.apply(console,[b].concat(d))},_0:function(a){var b=[];for(var d in a)b.push(a[d]);return b.join('; ')}})});c.extend({Node:new i.Class(c.Base,{backtraceFilter:function(){return new RegExp(process.cwd()+'/','g')},coloring:function(){return!this.envvar(c.NO_COLOR)&&require('tty').isatty(1)},envvar:function(a){return process.env[a]||null},exit:function(a){process.exit(a)},getDimensions:function(){var a,b,d;if(process.stdout.getWindowSize){d=process.stdout.getWindowSize();a=d[0];b=d[1]}else{d=process.binding('stdio').getWindowSize();a=d[1];b=d[0]}return[a,b]},print:function(a){require('sys').print(this.flushFormat()+a)},puts:function(a){require('sys').puts(this.flushFormat()+a)}})});c.extend({Phantom:new i.Class(c.Base,{echo:function(a){console.log(a)},envvar:function(a){return require('system').env[a]||null},exit:function(a){phantom.exit(a)}})});c.extend({Rhino:new i.Class(c.Base,{backtraceFilter:function(){return new RegExp(java.lang.System.getProperty('user.dir')+'/','g')},envvar:function(a){var b=java.lang.System.getenv();return b.get(a)||null},getDimensions:function(){var a=java.lang.Runtime.getRuntime().exec(['sh','-c','stty -a < /dev/tty']),b=a.getInputStream(),d=0,e='',f,g;while(d>=0){d=b.read();if(d>=0)e+=String.fromCharCode(d)}var h=e.match(/rows\s+(\d+);\s+columns\s+(\d+)/);if(!h)return this._1||this.callSuper();return this._1=[parseInt(h[2],10),parseInt(h[1],10)]},print:function(a){java.lang.System.out.print(this.flushFormat()+a)},puts:function(a){java.lang.System.out.println(this.flushFormat()+a)}})});c.extend({Windows:new i.Class(c.Base,{coloring:function(){return false},echo:function(a){WScript.Echo(a)},exit:function(a){WScript.Quit(a)}})});c.BROWSER=(typeof window!=='undefined');c.NODE=(typeof process==='object')&&!c.BROWSER;c.PHANTOM=(typeof phantom!=='undefined');c.AIR=(c.BROWSER&&typeof runtime!=='undefined');c.RHINO=(typeof java!=='undefined'&&typeof java.lang!=='undefined');c.WSH=(typeof WScript!=='undefined');var l=false,k;if(c.BROWSER){k=navigator.userAgent;if(window.console&&(/Firefox/.test(k)||/Chrome/.test(k)))l=true}if(c.PHANTOM)c.adapter=new c.Phantom();else if(l)c.adapter=new c.BrowserColor();else if(c.BROWSER)c.adapter=new c.Browser();else if(c.NODE)c.adapter=new c.Node();else if(c.RHINO)c.adapter=new c.Rhino();else if(c.WSH)c.adapter=new c.Windows();else c.adapter=new c.Base();for(var m in c.ESCAPE_CODES){for(var key in c.ESCAPE_CODES[m])(function(a,b){c.define(b,function(){c.adapter.format(a,b,arguments)})})(m,key)}c.extend(c);o.Console=c});
//@ sourceMappingURL=console.js.map