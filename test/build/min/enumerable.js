(function(a){var b=(typeof exports==='object'),c=(typeof JS==='undefined')?require('./core'):JS;if(b)exports.JS=exports;a(c,b?exports:c)})(function(i,m){'use strict';var f=new i.Module('Enumerable',{extend:{ALL_EQUAL:{},forEach:function(a,b){if(!a)return new Enumerator(this,'forEach');for(var c=0;c<this.length;c++)a.call(b||null,this[c]);return this},isComparable:function(b){return b.all(function(a){return typeof a.compareTo==='function'})},areEqual:function(a,b){var c;if(a===b)return true;if(a&&typeof a.equals==='function')return a.equals(b);if(a instanceof Function)return a===b;if(a instanceof Array){if(!(b instanceof Array))return false;for(var d=0,e=a.length;d<e;d++){c=this.areEqual(a[d],b[d]);if(c===this.ALL_EQUAL)return true;if(!c)return false}if(a.length!==b.length)return false;return true}if(a instanceof Date){if(!(b instanceof Date))return false;if(a.getTime()!==b.getTime())return false;return true}if(a instanceof Object){if(!(b instanceof Object))return false;if(this.objectSize(a)!==this.objectSize(b))return false;for(var g in a){if(!this.areEqual(a[g],b[g]))return false}return true}return false},objectKeys:function(a,b){var c=[];for(var d in a){if(a.hasOwnProperty(d)||b!==false)c.push(d)}return c},objectSize:function(a){return this.objectKeys(a).length},Collection:new i.Class({initialize:function(a){this.length=0;if(a)f.forEach.call(a,this.push,this)},push:function(a){Array.prototype.push.call(this,a)},clear:function(){var a=this.length;while(a--)delete this[a];this.length=0}})},all:function(b,c){b=f.toFn(b);var d=true;this.forEach(function(a){d=d&&(b?b.apply(c||null,arguments):a)});return!!d},any:function(b,c){b=f.toFn(b);var d=false;this.forEach(function(a){d=d||(b?b.apply(c||null,arguments):a)});return!!d},count:function(a,b){if(typeof this.size==='function')return this.size();var c=0,d=a;if(a&&typeof a!=='function')a=function(x){return f.areEqual(x,d)};this.forEach(function(){if(!a||a.apply(b||null,arguments))c+=1});return c},cycle:function(a,b,c){if(!b)return this.enumFor('cycle',a);b=f.toFn(b);while(a--)this.forEach(b,c)},drop:function(c){var d=[];this.forEachWithIndex(function(a,b){if(b>=c)d.push(a)});return d},dropWhile:function(b,c){if(!b)return this.enumFor('dropWhile');b=f.toFn(b);var d=[],e=true;this.forEach(function(a){if(e)e=e&&b.apply(c||null,arguments);if(!e)d.push(a)});return d},forEachCons:function(a,b,c){if(!b)return this.enumFor('forEachCons',a);b=f.toFn(b);var d=this.toArray(),e=d.length,g=e-a,h;for(h=0;h<=g;h++)b.call(c||null,d.slice(h,h+a));return this},forEachSlice:function(a,b,c){if(!b)return this.enumFor('forEachSlice',a);b=f.toFn(b);var d=this.toArray(),e=d.length,g=Math.ceil(e/a),h;for(h=0;h<g;h++)b.call(c||null,d.slice(h*a,(h+1)*a));return this},forEachWithIndex:function(c,d,e){if(typeof c==='function'){e=d;d=c;c=0}c=c||0;if(!d)return this.enumFor('forEachWithIndex',c);d=f.toFn(d);return this.forEach(function(a){var b=d.call(e||null,a,c);c+=1;return b})},forEachWithObject:function(b,c,d){if(!c)return this.enumFor('forEachWithObject',b);c=f.toFn(c);this.forEach(function(){var a=[b].concat(i.array(arguments));c.apply(d||null,a)});return b},find:function(b,c){if(!b)return this.enumFor('find');b=f.toFn(b);var d={},e=d;this.forEach(function(a){if(d!==e)return;d=b.apply(c||null,arguments)?a:d});return d===e?null:d},findIndex:function(c,d){if(c===undefined)return this.enumFor('findIndex');var e=null,g=(typeof c==='function');this.forEachWithIndex(function(a,b){if(e!==null)return;if(f.areEqual(c,a)||(g&&c.apply(d||null,arguments)))e=b});return e},first:function(a){var b=this.toArray();return(a===undefined)?b[0]:b.slice(0,a)},grep:function(c,d,e){d=f.toFn(d);var g=[];this.forEach(function(a){var b=(typeof c.match==='function')?c.match(a):(typeof c.test==='function')?c.test(a):i.isType(a,c);if(!b)return;if(d)a=d.apply(e||null,arguments);g.push(a)});return g},groupBy:function(c,d){if(!c)return this.enumFor('groupBy');c=f.toFn(c);var e=((typeof require==='function')?require('./hash'):i).Hash,g=new e();this.forEach(function(a){var b=c.apply(d||null,arguments);if(!g.hasKey(b))g.store(b,[]);g.get(b).push(a)});return g},inject:function(c,d,e){var g=i.array(arguments),h=0,j={};switch(g.length){case 1:c=j;d=g[0];break;case 2:if(typeof c==='function'){c=j;d=g[0];e=g[1]}}d=f.toFn(d);this.forEach(function(a){if(!h++&&c===j)return c=a;var b=[c].concat(i.array(arguments));c=d.apply(e||null,b)});return c},map:function(a,b){if(!a)return this.enumFor('map');a=f.toFn(a);var c=[];this.forEach(function(){c.push(a.apply(b||null,arguments))});return c},max:function(a,b){return this.minmax(a,b)[1]},maxBy:function(a,b){if(!a)return this.enumFor('maxBy');return this.minmaxBy(a,b)[1]},member:function(b){return this.any(function(a){return f.areEqual(a,b)})},min:function(a,b){return this.minmax(a,b)[0]},minBy:function(a,b){if(!a)return this.enumFor('minBy');return this.minmaxBy(a,b)[0]},minmax:function(a,b){var c=this.sort(a,b);return[c[0],c[c.length-1]]},minmaxBy:function(a,b){if(!a)return this.enumFor('minmaxBy');var c=this.sortBy(a,b);return[c[0],c[c.length-1]]},none:function(a,b){return!this.any(a,b)},one:function(b,c){b=f.toFn(b);var d=0;this.forEach(function(a){if(b?b.apply(c||null,arguments):a)d+=1});return d===1},partition:function(b,c){if(!b)return this.enumFor('partition');b=f.toFn(b);var d=[],e=[];this.forEach(function(a){(b.apply(c||null,arguments)?d:e).push(a)});return[d,e]},reject:function(b,c){if(!b)return this.enumFor('reject');b=f.toFn(b);var d=[];this.forEach(function(a){if(!b.apply(c||null,arguments))d.push(a)});return d},reverseForEach:function(a,b){if(!a)return this.enumFor('reverseForEach');a=f.toFn(a);var c=this.toArray(),d=c.length;while(d--)a.call(b||null,c[d]);return this},select:function(b,c){if(!b)return this.enumFor('select');b=f.toFn(b);var d=[];this.forEach(function(a){if(b.apply(c||null,arguments))d.push(a)});return d},sort:function(c,d){var e=f.isComparable(this),g=this.toArray();c=c||(e?function(a,b){return a.compareTo(b)}:null);return c?g.sort(function(a,b){return c.call(d||null,a,b)}):g.sort()},sortBy:function(c,d){if(!c)return this.enumFor('sortBy');c=f.toFn(c);var e=f,g=new e.Collection(this.map(c,d)),h=e.isComparable(g);return new e.Collection(g.zip(this).sort(function(a,b){a=a[0];b=b[0];return h?a.compareTo(b):(a<b?-1:(a>b?1:0))})).map(function(a){return a[1]})},take:function(c){var d=[];this.forEachWithIndex(function(a,b){if(b<c)d.push(a)});return d},takeWhile:function(b,c){if(!b)return this.enumFor('takeWhile');b=f.toFn(b);var d=[],e=true;this.forEach(function(a){if(e)e=e&&b.apply(c||null,arguments);if(e)d.push(a)});return d},toArray:function(){return this.drop(0)},zip:function(){var d=f,e=[],g=0,h=arguments.length,j,k;if(typeof arguments[h-1]==='function'){j=arguments[h-1];k={}}if(typeof arguments[h-2]==='function'){j=arguments[h-2];k=arguments[h-1]}d.forEach.call(arguments,function(a){if(a===j||a===k)return;if(a.toArray)a=a.toArray();if(i.isType(a,Array))e.push(a)});var l=this.map(function(b){var c=[b];d.forEach.call(e,function(a){c.push(a[g]===undefined?null:a[g])});return++g&&c});if(!j)return l;d.forEach.call(l,j,k)}});f.define('forEach',f.forEach);f.alias({collect:'map',detect:'find',entries:'toArray',every:'all',findAll:'select',filter:'select',some:'any'});f.extend({toFn:function(a){if(!a)return a;if(a.toFunction)return a.toFunction();if(this.OPS[a])return this.OPS[a];if(i.isType(a,'string')||i.isType(a,String))return function(){var b=i.array(arguments),c=b.shift(),d=c[a];return(typeof d==='function')?d.apply(c,b):d};return a},OPS:{'+':function(a,b){return a+b},'-':function(a,b){return a-b},'*':function(a,b){return a*b},'/':function(a,b){return a/b},'%':function(a,b){return a%b},'^':function(a,b){return a^b},'&':function(a,b){return a&b},'&&':function(a,b){return a&&b},'|':function(a,b){return a|b},'||':function(a,b){return a||b},'==':function(a,b){return a==b},'!=':function(a,b){return a!=b},'>':function(a,b){return a>b},'>=':function(a,b){return a>=b},'<':function(a,b){return a<b},'<=':function(a,b){return a<=b},'===':function(a,b){return a===b},'!==':function(a,b){return a!==b},'[]':function(a,b){return a[b]},'()':function(a,b){return a(b)}},Enumerator:new i.Class({include:f,extend:{DEFAULT_METHOD:'forEach'},initialize:function(a,b,c){this._0=a;this._1=b||this.klass.DEFAULT_METHOD;this._2=(c||[]).slice()},equals:function(a){return i.isType(a,this.klass)&&this._0===a._0&&this._1===a._1&&f.areEqual(this._2,a._2)},forEach:function(a,b){if(!a)return this;var c=this._2.slice();c.push(a);if(b)c.push(b);return this._0[this._1].apply(this._0,c)}})});f.Enumerator.alias({cons:'forEachCons',reverse:'reverseForEach',slice:'forEachSlice',withIndex:'forEachWithIndex',withObject:'forEachWithObject'});f.Collection.include(f);i.Kernel.include({enumFor:function(a){var b=i.array(arguments),a=b.shift();return new f.Enumerator(this,a,b)}},{_3:false});i.Kernel.alias({toEnum:'enumFor'});m.Enumerable=f});
//@ sourceMappingURL=enumerable.js.map