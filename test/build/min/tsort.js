(function(a){var b=(typeof exports==='object'),c=(typeof JS==='undefined')?require('./core'):JS,e=c.Hash||require('./hash').Hash;if(b)exports.JS=exports;a(c,e,b?exports:c)})(function(h,p,q){'use strict';var l=new h.Module('TSort',{extend:{Cyclic:new h.Class(Error)},tsort:function(){var a=[];this.tsortEach(a.push,a);return a},tsortEach:function(b,c){this.eachStronglyConnectedComponent(function(a){if(a.length===1)b.call(c||null,a[0]);else throw new l.Cyclic('topological sort failed: '+a.toString());})},stronglyConnectedComponents:function(){var a=[];this.eachStronglyConnectedComponent(a.push,a);return a},eachStronglyConnectedComponent:function(c,e){var d=new p(),f=[];this.tsortEachNode(function(b){if(d.hasKey(b))return;this.eachStronglyConnectedComponentFrom(b,d,f,function(a){c.call(e||null,a)})},this)},eachStronglyConnectedComponentFrom:function(e,d,f,m,n){var j=d.size,o=f.length,g=j,i,k;d.store(e,j);f.push(e);this.tsortEachChild(e,function(a){if(d.hasKey(a)){var b=d.get(a);if(a!==undefined&&b<g)g=b}else{var c=this.eachStronglyConnectedComponentFrom(a,d,f,m,n);if(c<g)g=c}},this);if(j===g){i=f.splice(o,f.length-o);k=i.length;while(k--)d.store(i[k],undefined);m.call(n||null,i)}return g},tsortEachNode:function(){throw new h.NotImplementedError('tsortEachNode');},tsortEachChild:function(){throw new h.NotImplementedError('tsortEachChild');}});q.TSort=l});
//@ sourceMappingURL=tsort.js.map